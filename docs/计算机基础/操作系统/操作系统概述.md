---
date: 2021-01-06 23:55:17
updated: 2021-04-27 16:51:32
md5: '69f73c8dc3ab3decb8071086f83b0055'
---

# 操作系统概述

## 操作系统的概念、特征、功能和提供的服务

- **定义**：控制管理软、硬件资源，组织调度工作、资源分配，进而为软件、用户提供方便接口、环境的**程序集合**，是最基本的**系统软件**
- **特征**
    - **并发**
        - **途径**：引入**进程**，多道程序**分时交替**执行
        
        !> 区分**并发**（分时交替）和**并行**（同时）

    - **共享**（资源）
        - **两种方式**
            - **互斥共享**：针对**临界资源（独占资源）**
            - **同时访问**：广义的“同时”，可以是分时交替
    - **虚拟**：一个物理实体变成多个逻辑对应物，如：虚拟处理器（**时分复用**）、虚拟内存（**空分复用**）、虚拟外设等
    - **异步**：由于资源有限，进程的执行“走走停停”，以不可预知的速度推进
    
    !> **并发**和**共享**最基本，且互为存在的条件
    
- **目标**：方便、有效、可扩充、开放
- **功能**
    - **管理计算机系统资源**
        - **处理机管理**：进程控制、进程同步、进程通信、调度（进程/作业）
        - **存储器管理**：内存分配（静态/动态）、内存保护、内存扩充（虚存）、地址映射
        - **文件管理**：存储空间管理、目录管理、文件读写管理和保护
        - **设备管理**：缓冲管理、设备分配、设备处理（驱动）
    - **提供用户与OS之间的接口**
        - **用户接口（命令接口）**
            - **联机用户接口**：终端→命令解释程序
            - **脱机用户接口**：批处理
            - **图形用户接口**：可视化界面
        - **程序接口（系统调用）**：API
    - **实现计算机资源的抽象**：扩充**裸机**（没有任何软件支持的计算机）

## 操作系统的发展与分类

1. **无OS阶段**
    1. **手工操作**：用户独占全机、资源利用率低；CPU等待人工操作，利用不充分
    2. **脱机I/O**：外围机控制程序和数据输入输出
2. **有OS阶段**
    1. **批处理系统**
        - **单道批处理系统**：**自动性好**，解决人机矛盾
        - **多道批处理系统**：多道程序并发，**资源利用充分**，**系统吞吐量大**
    2. **分时系统**：引入**时间片**。可以**多用户**同时使用，人机**交互性**好
        - **进程调度算法**：**优先级 + 非抢占式**
    3. **实时系统**：在**时限**内完成紧急任务，高度可靠
        - **进程调度算法**：**优先级 + 抢占式**
    4. **网络操作系统和分布式计算机系统**
    5. **个人计算机操作系统**

## 操作系统的运行环境

- **特权指令**：不允许用户直接使用的指令。如**I/O指令**、**置中断指令**、**存取用于内存保护的寄存器指令**、**送PSW寄存器指令**
- **内核态与用户态**
    |          CPU状态           |       运行程序       | 运行特权指令 |
    | :------------------------: | :------------------: | :----------: |
    | **内核态（管态、核心态）** |       内核程序       |      √       |
    |     **用户态（目态）**     | 用户程序（应用程序） |      ×       |

- **内核**：计算机上配置的底层软件
    - **组成**：时钟管理、中断机制、原语、系统控制的数据结构及处理
- **原语**
    - 处于OS最底层
    - 具有**原子性**，只能“一气呵成”
    - 运行时间短，调用频繁
- **中断与异常**
    - **中断**即**外中断**，**异常**即**内中断**
    - **发生中断或异常时，CPU从用户态切换到内核态**，从而可以间接调用特权指令（**通过硬件实现**）
- **系统调用（广义指令）**：*用户程序*中调用OS提供的一些子功能
- **访管指令（陷入指令、trap指令）**：*用户程序*发起系统调用的指令，执行后产生**访管中断**（自愿中断），进入**内核态**

## 操作系统体系结构

- **大内核系统**：将OS的主要功能模块都运行在核心态。性能优
- **微内核系统**：仅将内核中最基本的功能保留。简化内核，便于内核代码维护

## 面试临时补充（TODO）

1. select,poll,epoll的使用场景以及区别，epoll中水平触发以及边缘触发有什么不同
2. 自旋锁与互斥锁的使用场景
3. mmap使用场景及原理
4. **线程同步四大方式**
5. 两个线程交替打印一个共享变量
6. Linux进程调度算法
7. Linux下如何查看端口被哪个进程占用
8. Linux零拷贝的原理
9.  什么情况下，进程会进行切换
10. traceroute命令的原理
    1.  UDP实现
    2.  ICMP报文
